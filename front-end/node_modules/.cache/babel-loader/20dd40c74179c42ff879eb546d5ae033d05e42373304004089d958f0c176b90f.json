{"ast":null,"code":"import _regeneratorRuntime from\"/Users/deboraleite/Documents/Conestoga/2_Term/Web_Technologies/Final project/farm_marketplace/front-end/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"/Users/deboraleite/Documents/Conestoga/2_Term/Web_Technologies/Final project/farm_marketplace/front-end/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/deboraleite/Documents/Conestoga/2_Term/Web_Technologies/Final project/farm_marketplace/front-end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/deboraleite/Documents/Conestoga/2_Term/Web_Technologies/Final project/farm_marketplace/front-end/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useContext}from'react';import{Container}from'./MyProductStyle';import{useNavigate}from'react-router-dom';import{AppContext}from'./AppProvider';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MyProduct=function MyProduct(){var _useContext=useContext(AppContext),url=_useContext.url;var accountID=sessionStorage.getItem(\"accountID\");var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),productList=_useState2[0],setProductList=_useState2[1];useEffect(function(){if(!sessionStorage.getItem(\"id\")){navigate('/');}fetch(url+'getListOfProductByFarmer.php',{// fetch('http://localhost/backend/getListOfProductByFarmer.php', {\nmethod:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({FarmerID:accountID})}).then(function(response){return response.json();}).then(function(data){setProductList(data);});},[accountID,url,navigate]);var handleDelete=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(product,key){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(url+'deleteProduct.php',{// await fetch('http://localhost/backend/deleteProduct.php', {\nmethod:'DELETE',headers:{'Content-Type':'application/json'},body:JSON.stringify({ProductID:product.ProductID})});case 2:alert('Deleted product.');productList.splice(key,1);setProductList(_toConsumableArray(productList));case 5:case\"end\":return _context.stop();}},_callee);}));return function handleDelete(_x,_x2){return _ref.apply(this,arguments);};}();var handleEdit=function handleEdit(product,key){navigate('/editProduct',{state:{product:product}});// <Navigate to=\"/editProduct\" state={product}/>;\n};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"My Products\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{})]}),productList.map(function(product,key){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:product.ProductName}),/*#__PURE__*/_jsx(\"td\",{children:product.ProductDescription}),/*#__PURE__*/_jsx(\"td\",{children:product.ProductPrice}),/*#__PURE__*/_jsx(\"td\",{children:product.ProductQuantity}),/*#__PURE__*/_jsx(\"td\",{children:product.ProductCategory}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleEdit(product,key);},id:\"btnEdit\",children:\"Edit\"}),\" \",/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleDelete(product,key);},id:\"btnDelete\",children:\"Delete\"})]})]},product.ProductID);})]})]});};export default MyProduct;","map":{"version":3,"names":["React","useState","useEffect","useContext","Container","useNavigate","AppContext","MyProduct","url","accountID","sessionStorage","getItem","navigate","productList","setProductList","fetch","method","headers","body","JSON","stringify","FarmerID","then","response","json","data","handleDelete","product","key","ProductID","alert","splice","handleEdit","state","map","ProductName","ProductDescription","ProductPrice","ProductQuantity","ProductCategory"],"sources":["/Users/deboraleite/Documents/Conestoga/2_Term/Web_Technologies/Final project/farm_marketplace/front-end/src/Components/MyProduct.js"],"sourcesContent":["import React, {useState, useEffect, useContext} from 'react';\nimport { Container } from './MyProductStyle';\nimport { useNavigate } from 'react-router-dom';\nimport { AppContext } from './AppProvider';\n\nconst MyProduct = () =>   {\n\n    const { url} = useContext(AppContext);\n\n    const accountID  = sessionStorage.getItem(\"accountID\");\n\n    const navigate = useNavigate();\n    \n\n    const [productList, setProductList] = useState([]);\n\n    useEffect(()=>{\n        if(!sessionStorage.getItem(\"id\")){\n            navigate('/');\n        }\n        fetch(url + 'getListOfProductByFarmer.php', {\n        // fetch('http://localhost/backend/getListOfProductByFarmer.php', {\n            method: 'POST',\n            headers: {\n            'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                FarmerID: accountID\n            }) \n        })\n        .then( (response) => {\n            return response.json()\n        }).then( (data) => {\n            setProductList(data);\n        });\n        \n    },[accountID, url, navigate]);\n\n    const handleDelete  = async (product, key) =>{\n        await fetch(url + 'deleteProduct.php', {\n        // await fetch('http://localhost/backend/deleteProduct.php', {\n            method: 'DELETE',\n            headers: {\n            'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                ProductID: product.ProductID\n            }) \n        });\n\n        alert('Deleted product.');\n        productList.splice(key,1);\n        setProductList([...productList]);\n    } \n\n    const handleEdit  =  (product, key) =>{\n        navigate('/editProduct',{state:{product}});\n        // <Navigate to=\"/editProduct\" state={product}/>;\n    } \n\n    return (\n        <Container>\n            <h1>My Products</h1>\n            <table>\n                <tr>\n                    <th>Name</th>\n                    <th>Description</th>\n                    <th>Price</th>\n                    <th>Quantity</th>\n                    <th>Category</th>\n                    <th></th>\n                </tr>\n                {productList.map((product, key) => {\n                    return (\n                        <tr key={product.ProductID}>\n                        <td>{product.ProductName}</td>\n                        <td>{product.ProductDescription}</td>\n                        <td>{product.ProductPrice}</td>\n                        <td>{product.ProductQuantity}</td>\n                        <td>{product.ProductCategory}</td>\n                        <td><button onClick={() => handleEdit(product, key)}  id='btnEdit'>Edit</button> <button onClick={() => handleDelete(product, key)} id='btnDelete'>Delete</button></td>\n                        </tr>\n                    )\n                })}\n            </table>\n        </Container>\n        \n    );\n}\n\n   export default MyProduct; \n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}