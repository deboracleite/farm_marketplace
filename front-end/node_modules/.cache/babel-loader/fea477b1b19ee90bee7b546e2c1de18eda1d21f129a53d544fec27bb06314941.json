{"ast":null,"code":"import _regeneratorRuntime from\"/Users/deboraleite/Documents/Conestoga/2_Term/Web_Technologies/Final project/farm_marketplace/front-end/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/deboraleite/Documents/Conestoga/2_Term/Web_Technologies/Final project/farm_marketplace/front-end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/deboraleite/Documents/Conestoga/2_Term/Web_Technologies/Final project/farm_marketplace/front-end/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useCallback,useContext}from'react';import{Container}from'./ReceiptStyle';import{useLocation,useNavigate}from'react-router-dom';import{AppContext}from'./AppProvider';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Receipt=function Receipt(){var _location$state;var _useContext=useContext(AppContext),url=_useContext.url;var location=useLocation();var orderId=(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.orderId;var navigate=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),date=_useState4[0],setDate=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),subTotal=_useState6[0],setSubTotal=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),tax=_useState8[0],setTax=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),totalPrice=_useState10[0],setTotalPrice=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),orderItem=_useState12[0],setOrderItem=_useState12[1];var getUser=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var id;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:id=sessionStorage.getItem(\"id\");_context.next=3;return fetch(url+'getUserById.php',{// await fetch('http://localhost/backend/getUserById.php', {\nmethod:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({UserId:id})}).then(function(response){return response.json();}).then(function(data){setName(data.FirstName+' '+data.LastName);}).catch(function(){return alert('error fetch');});case 3:case\"end\":return _context.stop();}},_callee);})),[url]);var getOrder=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(url+'getOrderById.php',{// await fetch('http://localhost/backend/getOrderById.php', {\nmethod:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({OrderId:orderId})}).then(function(response){return response.json();}).then(function(data){setDate(data.OrderDate);setOrderItem(data.OrderItem);setSubTotal(data.SubTotal);setTax(data.Tax);setTotalPrice(data.TotalPrice);}).catch(function(){return alert('error fetch');});case 2:case\"end\":return _context2.stop();}},_callee2);})),[orderId,url]);useEffect(function(){if(!sessionStorage.getItem(\"id\")){navigate('/');}getUser();getOrder();},[getOrder,getUser,navigate]);return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Receipt\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"receipt\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Name: \",name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Date: \",date]}),orderItem.map(function(item,key){return/*#__PURE__*/_jsxs(\"div\",{className:\"rowReceipt\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"name\",children:item.ItemName}),/*#__PURE__*/_jsx(\"p\",{className:\"qty\",children:item.ItemQuantity}),/*#__PURE__*/_jsxs(\"p\",{className:\"itemPrice\",children:[\"$\",item.ItemPrice]})]},item.ProductID);}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Sub-total: $\",subTotal]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Tax: $\",tax]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Total price: $\",totalPrice]})]})]});};export default Receipt;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useContext","Container","useLocation","useNavigate","AppContext","Receipt","url","location","orderId","state","navigate","name","setName","date","setDate","subTotal","setSubTotal","tax","setTax","totalPrice","setTotalPrice","orderItem","setOrderItem","getUser","id","sessionStorage","getItem","fetch","method","headers","body","JSON","stringify","UserId","then","response","json","data","FirstName","LastName","catch","alert","getOrder","OrderId","OrderDate","OrderItem","SubTotal","Tax","TotalPrice","map","item","key","ItemName","ItemQuantity","ItemPrice","ProductID"],"sources":["/Users/deboraleite/Documents/Conestoga/2_Term/Web_Technologies/Final project/farm_marketplace/front-end/src/Components/Receipt.js"],"sourcesContent":["import React, {useState, useEffect,useCallback, useContext} from 'react';\nimport { Container } from './ReceiptStyle';\nimport { useLocation, useNavigate} from 'react-router-dom';\nimport { AppContext } from './AppProvider';\n\nconst Receipt = () =>   {\n\n    const { url} = useContext(AppContext);\n\n    const location = useLocation();\n    const orderId = location.state?.orderId;\n    const navigate = useNavigate();\n    const [name, setName] = useState(\"\");\n    const [date, setDate] = useState(\"\");\n    const [subTotal, setSubTotal] = useState(0);\n    const [tax, setTax] = useState(\"\");\n    const [totalPrice, setTotalPrice] = useState(\"\");\n    const [orderItem, setOrderItem] = useState([]);\n\n\n    const getUser = useCallback(async () => {\n        const id = sessionStorage.getItem(\"id\");\n        await fetch(url + 'getUserById.php',{\n        // await fetch('http://localhost/backend/getUserById.php', {\n                method: 'POST',\n                headers: {\n                'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    UserId: id\n                }) \n            })\n            .then( (response) => {\n                return response.json()\n            }).then( (data) => {\n                setName(data.FirstName + ' ' + data.LastName);               \n            }).catch(() => alert('error fetch'));\n            \n        }, [url]);\n\n    const getOrder = useCallback(async() =>{\n\n        await fetch(url + 'getOrderById.php',{\n        // await fetch('http://localhost/backend/getOrderById.php', {\n                method: 'POST',\n                headers: {\n                'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    OrderId: orderId\n                }) \n            })\n            .then( (response) => {\n                return response.json()\n            }).then( (data) => {\n                setDate(data.OrderDate);\n                setOrderItem(data.OrderItem);\n                setSubTotal(data.SubTotal);\n                setTax(data.Tax);\n                setTotalPrice(data.TotalPrice);\n            }).catch(() => alert('error fetch'));\n            \n        }, [orderId, url]);\n\n    useEffect(()=>{\n        if(!sessionStorage.getItem(\"id\")){\n            navigate('/');\n        }\n        getUser();\n        getOrder();\n        \n    },[getOrder,getUser,navigate]);\n\n    return (\n        <Container>\n            <h2>Receipt</h2>\n            <div id='receipt'>\n                <p>Name: {name}</p>\n                <p>Date: {date}</p>\n                {orderItem.map((item, key) => {\n                        return (\n                            <div key={item.ProductID} className = \"rowReceipt\">\n                                <p className='name'>{item.ItemName}</p>\n                                <p className='qty'>{item.ItemQuantity}</p>\n                                <p className='itemPrice'>${item.ItemPrice}</p>\n                            </div>\n                        )\n                    })}\n                <p>Sub-total: ${subTotal}</p>\n                <p>Tax: ${tax}</p>\n                <p>Total price: ${totalPrice}</p>\n            </div>\n        </Container>\n        \n    );\n}\n\n   export default Receipt; \n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}