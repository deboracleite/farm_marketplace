{"ast":null,"code":"import _defineProperty from\"/Users/deboraleite/Documents/Conestoga/2_Term/Web_Technologies/Final project/farm_marketplace/front-end/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/deboraleite/Documents/Conestoga/2_Term/Web_Technologies/Final project/farm_marketplace/front-end/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/deboraleite/Documents/Conestoga/2_Term/Web_Technologies/Final project/farm_marketplace/front-end/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState}from'react';import{Container}from'./ProductCardStyle';import{AppContext}from'./AppProvider';// import '../Styles/productCard.css';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProductCard(props){var _useContext=useContext(AppContext),cart=_useContext.cart,setCart=_useContext.setCart,cartPrice=_useContext.cartPrice,setCartPrice=_useContext.setCartPrice;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),qty=_useState2[0],setQty=_useState2[1];var handleAdd=function handleAdd(product,key){if(!cart[product.ProductID]){setQty(qty+1);var newCart=_objectSpread(_objectSpread({},cart),{},_defineProperty({},product.ProductID,_objectSpread(_objectSpread({},product),{},{qtyItem:1,totalPriceItem:product.ProductPrice})));setCart(newCart);console.log(newCart);sessionStorage.setItem(\"myCart\",JSON.stringify(newCart));}else{var _newCart=JSON.parse(sessionStorage.getItem(\"myCart\"));setQty(qty+1);_newCart[product.ProductID].qtyItem+=1;_newCart[product.ProductID].totalPriceItem=_newCart[product.ProductID].totalPriceItem+_newCart[product.ProductID].ProductPrice;setCart(_newCart);sessionStorage.setItem(\"myCart\",JSON.stringify(_newCart));}var totalPrice=sessionStorage.getItem(\"totalPrice\");totalPrice=parseFloat(totalPrice)+product.ProductPrice;console.log(totalPrice);setCartPrice(totalPrice);sessionStorage.setItem(\"totalPrice\",totalPrice);};var handleRemove=function handleRemove(product,key){var newCart=JSON.parse(sessionStorage.getItem(\"myCart\"));if(qty>1){newCart[product.ProductID].qtyItem-=1;newCart[product.ProductID].totalPriceItem=newCart[product.ProductID].totalPriceItem-newCart[product.ProductID].ProductPrice;setCart(newCart);sessionStorage.setItem(\"myCart\",JSON.stringify(newCart));}else{delete newCart[product.ProductID];setCart(newCart);sessionStorage.setItem(\"myCart\",JSON.stringify(newCart));}setQty(qty-1);var totalPrice=sessionStorage.getItem(\"totalPrice\");totalPrice=parseFloat(totalPrice)-product.ProductPrice;setCartPrice(totalPrice);sessionStorage.setItem(\"totalPrice\",totalPrice);};return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"blockItem\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:props.productItem.ProductImageURL,className:\"ImgItem\",alt:\"ImgItem\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"ItemName\",children:props.productItem.ProductName}),/*#__PURE__*/_jsxs(\"p\",{className:\"ItemPrice\",children:[\"$ \",props.productItem.ProductPrice]}),!cart[props.productItem.ProductID]&&/*#__PURE__*/_jsx(\"button\",{className:\"btnItem\",onClick:function onClick(){return handleAdd(props.productItem,props.key);},children:\"ADD\"}),cartPrice>0&&!!cart[props.productItem.ProductID]&&/*#__PURE__*/_jsxs(\"div\",{id:\"groupButtonCart\",children:[/*#__PURE__*/_jsx(\"button\",{id:\"btnRemove\",onClick:function onClick(){return handleRemove(props.productItem,props.key);},children:\"-\"}),/*#__PURE__*/_jsx(\"button\",{id:\"btnAdd\",onClick:function onClick(){return handleAdd(props.productItem,props.key);},children:\"+\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Qty: \",(cart[props.productItem.ProductID]||{}).qtyItem||0,\" \"]})]})});}export default ProductCard;","map":{"version":3,"names":["React","useContext","useState","Container","AppContext","ProductCard","props","cart","setCart","cartPrice","setCartPrice","qty","setQty","handleAdd","product","key","ProductID","newCart","qtyItem","totalPriceItem","ProductPrice","console","log","sessionStorage","setItem","JSON","stringify","parse","getItem","totalPrice","parseFloat","handleRemove","productItem","ProductImageURL","ProductName"],"sources":["/Users/deboraleite/Documents/Conestoga/2_Term/Web_Technologies/Final project/farm_marketplace/front-end/src/Components/ProductCard.js"],"sourcesContent":["import React,{useContext, useState} from 'react';\nimport {Container} from './ProductCardStyle';\nimport { AppContext } from './AppProvider'\n// import '../Styles/productCard.css';\n\n\n\nfunction ProductCard (props) {\n\n    const { cart, setCart , cartPrice, setCartPrice} = useContext(AppContext);\n    const [qty, setQty] = useState(0);\n\n    const handleAdd  =  (product, key) =>{\n\n        if(!cart[product.ProductID]){\n            setQty(qty+1);\n            const newCart = {\n                ...cart,\n                [product.ProductID]: {\n                    ...product,\n                    qtyItem: 1,\n                    totalPriceItem: product.ProductPrice\n                }\n                \n            }\n            setCart(newCart);\n            console.log(newCart);\n            sessionStorage.setItem(\"myCart\", JSON.stringify(newCart));\n        }else{\n            const newCart = JSON.parse(sessionStorage.getItem(\"myCart\"));\n            \n            setQty(qty+1);\n            newCart[product.ProductID].qtyItem += 1\n            newCart[product.ProductID].totalPriceItem = newCart[product.ProductID].totalPriceItem + newCart[product.ProductID].ProductPrice;\n            setCart(newCart);\n            sessionStorage.setItem(\"myCart\", JSON.stringify(newCart));\n        }\n        let totalPrice = sessionStorage.getItem(\"totalPrice\");\n        totalPrice = parseFloat(totalPrice) + product.ProductPrice;\n        console.log(totalPrice);\n        setCartPrice(totalPrice);\n        sessionStorage.setItem(\"totalPrice\", totalPrice);\n    }\n\n    const handleRemove  =  (product, key) =>{\n         const newCart = JSON.parse(sessionStorage.getItem(\"myCart\"));\n        if(qty > 1) {\n            newCart[product.ProductID].qtyItem -= 1;\n            newCart[product.ProductID].totalPriceItem =  newCart[product.ProductID].totalPriceItem - newCart[product.ProductID].ProductPrice;\n            setCart(newCart);\n            sessionStorage.setItem(\"myCart\", JSON.stringify(newCart));\n        }else{\n            delete newCart[product.ProductID];\n            setCart(newCart);\n            sessionStorage.setItem(\"myCart\", JSON.stringify(newCart));\n        }\n        setQty(qty-1);\n        let totalPrice = sessionStorage.getItem(\"totalPrice\");\n        totalPrice = parseFloat(totalPrice) - product.ProductPrice\n        setCartPrice(totalPrice);\n        sessionStorage.setItem(\"totalPrice\", totalPrice);\n    }\n\n    return(\n        \n        <Container>\n            <div className=\"blockItem\">\n                <div>\n                <img src={props.productItem.ProductImageURL} className=\"ImgItem\" alt=\"ImgItem\"/>\n                </div>\n                <p className=\"ItemName\">{props.productItem.ProductName}</p>\n                <p className=\"ItemPrice\">$ {props.productItem.ProductPrice}</p>\n                {!cart[props.productItem.ProductID] && <button className=\"btnItem\" onClick={() => handleAdd(props.productItem, props.key)} >ADD</button>}\n                {cartPrice > 0 && !!cart[props.productItem.ProductID] &&\n                    <div id='groupButtonCart'>\n                        <button id=\"btnRemove\" onClick={() => handleRemove(props.productItem, props.key)} >-</button>\n                        <button id=\"btnAdd\" onClick={() => handleAdd(props.productItem, props.key)} >+</button>\n                    </div> \n                }\n                <p>Qty: {((cart[props.productItem.ProductID] || {}).qtyItem) || 0} </p>\n            </div>\n        </Container>\n    );\n}\n\nexport default ProductCard;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}